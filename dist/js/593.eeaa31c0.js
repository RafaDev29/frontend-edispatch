"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[593],{6260:function(e,t,o){o.d(t,{AN:function(){return n},kr:function(){return l},lg:function(){return i},lx:function(){return s}});var r=o(1189);const a="http://147.182.161.84:9000/api/v1";function l(e){return r.A.get(`${a}/billings/all`,{headers:{Authorization:`Bearer ${e}`}})}function n(e,t){return r.A.post(`${a}/billings/add`,t,{headers:{Authorization:`Bearer ${e}`}})}function i(e,t,o){return console.log(o),r.A.put(`${a}/billings/update/${o}`,t,{headers:{Authorization:`Bearer ${e}`}})}function s(e,t){return r.A.delete(`${a}/billings/delete/${t}`,{headers:{Authorization:`Bearer ${e}`}})}},5593:function(e,t,o){o.r(t),o.d(t,{default:function(){return M}});var r=o(6768);const a=e=>((0,r.Qi)("data-v-f4495030"),e=e(),(0,r.jt)(),e),l={class:"pt-0 mt-0 pb-10 ml-0 mr-0 min-w-max[100%]"},n={class:"flex justify-between items-center mb-2 bg-gray-50 p-6 rounded-lg shadow-lg"},i=a((()=>(0,r.Lk)("h1",{class:"font-bold lg:text-2xl text-xl text-indigo-900"},[(0,r.Lk)("span",{class:"mdi mdi-map"}),(0,r.eW)(" Mantenimiento de Zonas")],-1)));function s(e,t,o,a,s,d){const c=(0,r.g2)("DataTable"),u=(0,r.g2)("CreateZonesForm");return(0,r.uX)(),(0,r.CE)("div",l,[(0,r.Lk)("div",null,[(0,r.Lk)("div",n,[i,(0,r.Lk)("button",{class:"flex items-center justify-center bg-[#ff8c54] text-white font-semibold px-5 py-2 rounded-lg hover:bg-orange-500 shadow-md",onClick:t[0]||(t[0]=(...e)=>a.openCreateForm&&a.openCreateForm(...e))}," Crear + ")]),(0,r.bF)(c),a.isCreateFormVisible?((0,r.uX)(),(0,r.Wv)(u,{key:0,onClose:a.closeCreateForm},null,8,["onClose"])):(0,r.Q3)("",!0)])])}var d=o(144),c=o(2729),u=o(6329),m=o(9669),p=o(5728);function f(e,t,o,a,l,n){const i=(0,r.g2)("EditBillingForm"),s=(0,r.g2)("SuccessAlert"),d=(0,r.g2)("ErrorAlert"),f=(0,r.g2)("WarningAlert");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(c.J,{flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(p.W,{modelValue:a.search,"onUpdate:modelValue":t[0]||(t[0]=e=>a.search=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"]),(0,r.bF)(u.Py,{headers:a.headers,items:a.filteredItems,search:a.search},{["item.actions"]:(0,r.k6)((({item:e})=>[(0,r.bF)(m.w,{small:"",class:"mr-2",onClick:t=>a.openEditForm(e)},{default:(0,r.k6)((()=>[(0,r.eW)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,r.bF)(m.w,{small:"",color:"red",onClick:t=>a.deleteItem(e)},{default:(0,r.k6)((()=>[(0,r.eW)(" mdi-delete ")])),_:2},1032,["onClick"])])),_:2},1032,["headers","items","search"]),a.isEditFormVisible?((0,r.uX)(),(0,r.Wv)(i,{key:0,cisterns:a.selectCisterns,onClose:a.closeEditForm},null,8,["cisterns","onClose"])):(0,r.Q3)("",!0)])),_:1}),(0,r.bF)(s),(0,r.bF)(d),(0,r.bF)(f)],64)}var b=o(1189);const k="http://147.182.161.84:9000/api/v1";function g(e){return b.A.get(`${k}/zones/all`,{headers:{Authorization:`Bearer ${e}`}})}function h(e,t){return b.A.post(`${k}/zones/add`,t,{headers:{Authorization:`Bearer ${e}`}})}function C(e,t){return b.A.delete(`${k}/zones/delete/${t}`,{headers:{Authorization:`Bearer ${e}`}})}var F=o(5129),v=o(6859),A=o(5130),V=o(2807),_=o(1606),x=o(697),y=o(3745),W=o(1772),z=o(1560);const $=e=>((0,r.Qi)("data-v-77bfef9f"),e=e(),(0,r.jt)(),e),w=$((()=>(0,r.Lk)("span",{class:"text-h5"},"Editar Zona",-1)));function E(e,t,o,a,l,n){return(0,r.uX)(),(0,r.Wv)(W.p,{modelValue:a.dialog,"onUpdate:modelValue":t[4]||(t[4]=e=>a.dialog=e),"max-width":"600px",persistent:""},{default:(0,r.k6)((()=>[(0,r.bF)(c.J,null,{default:(0,r.k6)((()=>[(0,r.bF)(_.r,{class:"text-center"},{default:(0,r.k6)((()=>[w])),_:1}),(0,r.bF)(x.O,null,{default:(0,r.k6)((()=>[(0,r.bF)(z.n,{onSubmit:(0,A.D$)(a.submitForm,["prevent"])},{default:(0,r.k6)((()=>[(0,r.bF)(p.W,{modelValue:a.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.name=e),label:"Nombre","prepend-icon":"mdi mdi-shield-check",required:""},null,8,["modelValue"]),(0,r.bF)(p.W,{modelValue:a.form.code,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.code=e),label:"Código ","prepend-icon":"mdi mdi-shield-check",required:""},null,8,["modelValue"]),(0,r.bF)(p.W,{modelValue:a.form.zipCode,"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.zipCode=e),label:"Código postal","prepend-icon":"mdi mdi-shield-check",required:""},null,8,["modelValue"]),(0,r.bF)(p.W,{modelValue:a.form.description,"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.description=e),label:"Descripción","prepend-icon":"mdi mdi-shield-check",required:""},null,8,["modelValue"]),(0,r.bF)(y.S,{class:"justify-end"},{default:(0,r.k6)((()=>[(0,r.bF)(V.D,{text:"",onClick:a.closeDialog,color:"#180c24"},{default:(0,r.k6)((()=>[(0,r.eW)("Cancelar")])),_:1},8,["onClick"]),(0,r.bF)(V.D,{type:"submit",color:"#ff8c54"},{default:(0,r.k6)((()=>[(0,r.eW)("Guardar")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var D=o(6260),U={props:{cisterns:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const o=(0,d.KR)(!0),a=(0,d.KR)({description:""});(0,r.wB)((()=>e.cisterns),(e=>{e&&(a.value={...e})}),{immediate:!0});const l=()=>{t("close")},n=async()=>{try{const e={name:a.value.name,code:a.value.code,zipCode:a.value.zipCode,description:a.value.description},t=F.A.state.token,o=a.value.billingId;await(0,D.lg)(t,e,o),v.A.emit("success","¡Operación completada con éxito!"),v.A.emit("masterCreated"),l()}catch(e){v.A.emit("error",`Ups... hubo un error al editar el usuario:  ${e.message}`),console.error("Error al actualizar el cisterns:",e.message)}};return{dialog:o,form:a,closeDialog:l,submitForm:n}}},B=o(1241);const K=(0,B.A)(U,[["render",E],["__scopeId","data-v-77bfef9f"]]);var q=K,R=o(8372),I=o(7572),L=o(3194),S={name:"DataTable",components:{EditBillingForm:q,SuccessAlert:R.A,ErrorAlert:I.A,WarningAlert:L.A},setup(){const e=(0,d.KR)(""),t=(0,d.KR)([]),o=F.A.state.token,a=(0,d.KR)(!1),l=(0,d.KR)(null),n=(0,d.KR)([{key:"name",title:"Nombre"},{key:"code",title:"Código"},{key:"description",title:"Descripción"},{key:"zipCode",title:"Código postal"},{key:"actions",title:"Acciones",sortable:!1}]),i=async()=>{try{const e=await g(o);t.value=e.data.data}catch(e){console.error("Error al obtener los cisterns:",e)}},s=e=>{l.value=e,a.value=!0},c=()=>{a.value=!1};(0,r.sV)((()=>{i(),v.A.on("masterCreated",i)})),(0,r.xo)((()=>{v.A.off("masterCreated",i)}));const u=(0,r.EW)((()=>{if(!e.value)return t.value;const o=e.value.toLowerCase();return t.value.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(o)))))})),m=e=>{const t=e.zoneId,o=e.username;v.A.emit("warning",{msg:`¿Estás seguro de que deseas eliminar al usuario ${o}?`,action:async()=>{try{const e=F.A.state.token;await C(e,t),v.A.emit("success","¡Operación completada con éxito!"),i()}catch(e){console.error("Error al eliminar el cisterns:",e)}}})};return{search:e,headers:n,filteredItems:u,openEditForm:s,closeEditForm:c,isEditFormVisible:a,selectCisterns:l,deleteItem:m}}};const j=(0,B.A)(S,[["render",f],["__scopeId","data-v-994091b6"]]);var O=j;const X=(0,r.Lk)("span",{class:"text-h5 mp-2 mb-4 text-center"},"Crear Nueva Zona",-1);function N(e,t,o,a,l,n){return(0,r.uX)(),(0,r.Wv)(W.p,{modelValue:a.dialog,"onUpdate:modelValue":t[4]||(t[4]=e=>a.dialog=e),"max-width":"600px",persistent:""},{default:(0,r.k6)((()=>[(0,r.bF)(c.J,null,{default:(0,r.k6)((()=>[X,(0,r.bF)(x.O,null,{default:(0,r.k6)((()=>[(0,r.bF)(z.n,{onSubmit:(0,A.D$)(a.submitForm,["prevent"])},{default:(0,r.k6)((()=>[(0,r.bF)(p.W,{modelValue:a.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.name=e),label:"Nombre","prepend-icon":"mdi mdi-map",required:""},null,8,["modelValue"]),(0,r.bF)(p.W,{modelValue:a.form.code,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.code=e),label:"Código","prepend-icon":"mdi mdi-code-greater-than",required:""},null,8,["modelValue"]),(0,r.bF)(p.W,{modelValue:a.form.description,"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.description=e),label:"Descripción","prepend-icon":"mdi mdi-book-open",required:""},null,8,["modelValue"]),(0,r.bF)(p.W,{modelValue:a.form.zipCode,"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.zipCode=e),label:"Código fiscal","prepend-icon":"mdi mdi-map-marker",required:""},null,8,["modelValue"]),(0,r.bF)(y.S,{class:"justify-end"},{default:(0,r.k6)((()=>[(0,r.bF)(V.D,{text:"",onClick:a.closeDialog,color:"#180c24"},{default:(0,r.k6)((()=>[(0,r.eW)("Cancelar")])),_:1},8,["onClick"]),(0,r.bF)(V.D,{type:"submit",color:"#ff8c54"},{default:(0,r.k6)((()=>[(0,r.eW)("Guardar")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var Z={emits:["close"],setup(e,{emit:t}){const o=(0,d.KR)(!0),r=(0,d.KR)({name:"",code:"",description:"",zipCode:""}),a=()=>{t("close")},l=async()=>{const e=F.A.state.token,t={name:r.value.name,code:r.value.code,description:r.value.description,zipCode:r.value.zipCode};try{await h(e,t),v.A.emit("success","¡Operación completada con éxito!"),v.A.emit("masterCreated"),a()}catch(o){v.A.emit("error",`Ups... hubo un error al crear el usuario:  ${o.message}`)}};return{dialog:o,form:r,closeDialog:a,submitForm:l}}};const Q=(0,B.A)(Z,[["render",N]]);var J=Q,T={components:{DataTable:O,CreateZonesForm:J},setup(){const e=(0,d.KR)(!1),t=()=>{e.value=!0},o=()=>{e.value=!1};return{isCreateFormVisible:e,openCreateForm:t,closeCreateForm:o}}};const G=(0,B.A)(T,[["render",s],["__scopeId","data-v-f4495030"]]);var M=G}}]);
//# sourceMappingURL=593.eeaa31c0.js.map