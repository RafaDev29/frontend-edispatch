"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[936],{9936:function(e,a,r){r.r(a),r.d(a,{default:function(){return P}});var o=r(6768);const t=e=>((0,o.Qi)("data-v-2d340100"),e=e(),(0,o.jt)(),e),l={class:"pt-0 mt-0 pb-10 ml-0 mr-0 min-w-max[100%]"},n={class:"flex justify-between items-center mb-2 bg-gray-50 p-6 rounded-lg shadow-lg"},s=t((()=>(0,o.Lk)("h1",{class:"font-bold lg:text-2xl text-xl text-indigo-900"},"Mantenimiento de Administradores",-1)));function i(e,a,r,t,i,d){const u=(0,o.g2)("DataTable"),m=(0,o.g2)("CreateMasterForm");return(0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("div",null,[(0,o.Lk)("div",n,[s,(0,o.Lk)("button",{class:"flex items-center justify-center bg-[#ff8c54] text-white font-semibold px-5 py-2 rounded-lg hover:bg-orange-500 shadow-md",onClick:a[0]||(a[0]=(...e)=>t.openCreateForm&&t.openCreateForm(...e))}," Crear + ")]),(0,o.bF)(u),t.isCreateFormVisible?((0,o.uX)(),(0,o.Wv)(m,{key:0,onClose:t.closeCreateForm},null,8,["onClose"])):(0,o.Q3)("",!0)])])}var d=r(144),u=r(2729),m=r(6329),c=r(9669),p=r(5728);function f(e,a,r,t,l,n){const s=(0,o.g2)("EditMasterForm"),i=(0,o.g2)("SuccessAlert"),d=(0,o.g2)("ErrorAlert"),f=(0,o.g2)("WarningAlert");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(u.J,{flat:""},{default:(0,o.k6)((()=>[(0,o.bF)(p.W,{modelValue:t.search,"onUpdate:modelValue":a[0]||(a[0]=e=>t.search=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"]),(0,o.bF)(m.Py,{headers:t.headers,items:t.filteredItems,search:t.search},{["item.actions"]:(0,o.k6)((({item:e})=>[(0,o.bF)(c.w,{small:"",class:"mr-2",onClick:a=>t.openEditForm(e)},{default:(0,o.k6)((()=>[(0,o.eW)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,o.bF)(c.w,{small:"",color:"red",onClick:a=>t.deleteItem(e)},{default:(0,o.k6)((()=>[(0,o.eW)(" mdi-delete ")])),_:2},1032,["onClick"])])),_:2},1032,["headers","items","search"]),t.isEditFormVisible?((0,o.uX)(),(0,o.Wv)(s,{key:0,master:t.selectedMaster,onClose:t.closeEditForm},null,8,["master","onClose"])):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(i),(0,o.bF)(d),(0,o.bF)(f)],64)}var b=r(1189);const g="http://147.182.161.84:9000/api/v1";function k(e,a){return b.A.post(`${g}/masters/add`,a,{headers:{Authorization:`Bearer ${e}`}})}function F(e){return console.log("este es el token ==================================>",e),b.A.get(`${g}/masters/all`,{headers:{Authorization:`Bearer ${e}`}})}function v(e,a,r){return console.log(r),b.A.put(`${g}/masters/update/${r}`,a,{headers:{Authorization:`Bearer ${e}`}})}function V(e,a){return b.A.delete(`${g}/masters/delete/${a}`,{headers:{Authorization:`Bearer ${e}`}})}var h=r(5129),C=r(6859),A=r(5130),w=r(2807),y=r(1606),_=r(697),x=r(3745),W=r(1772),U=r(1560);const E=e=>((0,o.Qi)("data-v-7b037ea4"),e=e(),(0,o.jt)(),e),$=E((()=>(0,o.Lk)("span",{class:"text-h5"},"Editar Master",-1)));function D(e,a,r,t,l,n){return(0,o.uX)(),(0,o.Wv)(W.p,{modelValue:t.dialog,"onUpdate:modelValue":a[5]||(a[5]=e=>t.dialog=e),"max-width":"600px",persistent:""},{default:(0,o.k6)((()=>[(0,o.bF)(u.J,null,{default:(0,o.k6)((()=>[(0,o.bF)(y.r,{class:"text-center"},{default:(0,o.k6)((()=>[$])),_:1}),(0,o.bF)(_.O,null,{default:(0,o.k6)((()=>[(0,o.bF)(U.n,{onSubmit:(0,A.D$)(t.submitForm,["prevent"])},{default:(0,o.k6)((()=>[(0,o.bF)(p.W,{modelValue:t.form.username,"onUpdate:modelValue":a[0]||(a[0]=e=>t.form.username=e),label:"Nombre de Usuario","prepend-icon":"mdi-account",required:""},null,8,["modelValue"]),(0,o.bF)(p.W,{modelValue:t.form.password,"onUpdate:modelValue":a[1]||(a[1]=e=>t.form.password=e),label:"Contraseña",type:"password","prepend-icon":"mdi-lock",required:""},null,8,["modelValue"]),(0,o.bF)(p.W,{modelValue:t.form.name,"onUpdate:modelValue":a[2]||(a[2]=e=>t.form.name=e),label:"Nombre del Master","prepend-icon":"mdi-account",required:""},null,8,["modelValue"]),(0,o.bF)(p.W,{modelValue:t.form.identifier,"onUpdate:modelValue":a[3]||(a[3]=e=>t.form.identifier=e),label:"Identificador","prepend-icon":"mdi-key",required:""},null,8,["modelValue"]),(0,o.bF)(p.W,{modelValue:t.form.logo,"onUpdate:modelValue":a[4]||(a[4]=e=>t.form.logo=e),label:"Logo URL","prepend-icon":"mdi-image",required:""},null,8,["modelValue"]),(0,o.bF)(x.S,{class:"justify-end"},{default:(0,o.k6)((()=>[(0,o.bF)(w.D,{text:"",onClick:t.closeDialog,color:"#180c24"},{default:(0,o.k6)((()=>[(0,o.eW)("Cancelar")])),_:1},8,["onClick"]),(0,o.bF)(w.D,{type:"submit",color:"#ff8c54"},{default:(0,o.k6)((()=>[(0,o.eW)("Guardar")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var L={props:{master:{type:Object,required:!0}},emits:["close"],setup(e,{emit:a}){const r=(0,d.KR)(!0),t=(0,d.KR)({username:"",password:"",name:"",identifier:"",logo:""});(0,o.wB)((()=>e.master),(e=>{e&&(t.value={...e})}),{immediate:!0});const l=()=>{a("close")},n=async()=>{try{const e={username:t.value.username,password:t.value.password,name:t.value.name,identifier:t.value.identifier,logo:t.value.logo},a=h.A.state.token,r=t.value.masterId;await v(a,e,r),C.A.emit("success","¡Operación completada con éxito!"),C.A.emit("masterCreated"),l()}catch(e){C.A.emit("error",`Ups... hubo un error al editar el usuario:  ${e.message}`),console.error("Error al actualizar el master:",e.message)}};return{dialog:r,form:t,closeDialog:l,submitForm:n}}},q=r(1241);const I=(0,q.A)(L,[["render",D],["__scopeId","data-v-7b037ea4"]]);var M=I,R=r(8372),K=r(7572),S=r(3194),j={name:"DataTable",components:{EditMasterForm:M,SuccessAlert:R.A,ErrorAlert:K.A,WarningAlert:S.A},setup(){const e=(0,d.KR)(""),a=(0,d.KR)([]),r=h.A.state.token,t=(0,d.KR)(!1),l=(0,d.KR)(null),n=(0,d.KR)([{align:"start",key:"name",sortable:!1,title:"Nombre del Master"},{key:"identifier",title:"Identificador"},{key:"username",title:"Usuario"},{key:"logo",title:"Logo",sortable:!1},{key:"actions",title:"Acciones",sortable:!1}]),s=async()=>{try{const e=await F(r);a.value=e.data.data}catch(e){console.error("Error al obtener los masters:",e)}},i=e=>{l.value=e,t.value=!0},u=()=>{t.value=!1};(0,o.sV)((()=>{s(),C.A.on("masterCreated",s)})),(0,o.xo)((()=>{C.A.off("masterCreated",s)}));const m=(0,o.EW)((()=>{if(!e.value)return a.value;const r=e.value.toLowerCase();return a.value.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(r)))))})),c=e=>{const a=e.masterId,r=e.username;C.A.emit("warning",{msg:`¿Estás seguro de que deseas eliminar al usuario ${r}?`,action:async()=>{try{const e=h.A.state.token;await V(e,a),C.A.emit("success","¡Operación completada con éxito!"),s()}catch(e){console.error("Error al eliminar el master:",e)}}})};return{search:e,headers:n,filteredItems:m,openEditForm:i,closeEditForm:u,isEditFormVisible:t,selectedMaster:l,deleteItem:c}}};const O=(0,q.A)(j,[["render",f],["__scopeId","data-v-7b4e9f1f"]]);var B=O;const N=(0,o.Lk)("span",{class:"text-h5 mp-2 mb-4 text-center"},"Crear Nuevo Master",-1);function X(e,a,r,t,l,n){return(0,o.uX)(),(0,o.Wv)(W.p,{modelValue:t.dialog,"onUpdate:modelValue":a[5]||(a[5]=e=>t.dialog=e),"max-width":"600px",persistent:""},{default:(0,o.k6)((()=>[(0,o.bF)(u.J,null,{default:(0,o.k6)((()=>[N,(0,o.bF)(_.O,null,{default:(0,o.k6)((()=>[(0,o.bF)(U.n,{onSubmit:(0,A.D$)(t.submitForm,["prevent"])},{default:(0,o.k6)((()=>[(0,o.bF)(p.W,{modelValue:t.form.username,"onUpdate:modelValue":a[0]||(a[0]=e=>t.form.username=e),label:"Nombre de Usuario ","prepend-icon":"mdi-account",required:""},null,8,["modelValue"]),(0,o.bF)(p.W,{modelValue:t.form.password,"onUpdate:modelValue":a[1]||(a[1]=e=>t.form.password=e),label:"Contraseña",type:"password","prepend-icon":"mdi-lock",required:""},null,8,["modelValue"]),(0,o.bF)(p.W,{modelValue:t.form.name,"onUpdate:modelValue":a[2]||(a[2]=e=>t.form.name=e),label:"Nombre del Master","prepend-icon":"mdi-account",required:""},null,8,["modelValue"]),(0,o.bF)(p.W,{modelValue:t.form.identifier,"onUpdate:modelValue":a[3]||(a[3]=e=>t.form.identifier=e),label:"Identificador","prepend-icon":"mdi-key",required:""},null,8,["modelValue"]),(0,o.bF)(p.W,{modelValue:t.form.logo,"onUpdate:modelValue":a[4]||(a[4]=e=>t.form.logo=e),label:"Logo URL","prepend-icon":"mdi-camera",required:""},null,8,["modelValue"]),(0,o.bF)(x.S,{class:"justify-end"},{default:(0,o.k6)((()=>[(0,o.bF)(w.D,{text:"",onClick:t.closeDialog,color:"#180c24"},{default:(0,o.k6)((()=>[(0,o.eW)("Cancelar")])),_:1},8,["onClick"]),(0,o.bF)(w.D,{type:"submit",color:"#ff8c54"},{default:(0,o.k6)((()=>[(0,o.eW)("Guardar")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var z={emits:["close"],setup(e,{emit:a}){const r=(0,d.KR)(!0),o=(0,d.KR)({username:"",password:"",name:"",identifier:"",logo:""}),t=()=>{a("close")},l=async()=>{const e=h.A.state.token,a={username:o.value.username,password:o.value.password,name:o.value.name,identifier:o.value.identifier,logo:o.value.logo};try{await k(e,a),C.A.emit("success","¡Operación completada con éxito!"),C.A.emit("masterCreated"),t()}catch(r){C.A.emit("error",`Ups... hubo un error al crear el usuario:  ${r.message}`)}};return{dialog:r,form:o,closeDialog:t,submitForm:l}}};const Q=(0,q.A)(z,[["render",X]]);var J=Q,T={components:{DataTable:B,CreateMasterForm:J},setup(){const e=(0,d.KR)(!1),a=()=>{e.value=!0},r=()=>{e.value=!1};return{isCreateFormVisible:e,openCreateForm:a,closeCreateForm:r}}};const G=(0,q.A)(T,[["render",i],["__scopeId","data-v-2d340100"]]);var P=G}}]);
//# sourceMappingURL=936.08d19ffe.js.map