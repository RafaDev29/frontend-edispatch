"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[321],{5679:function(e,o,l){l.d(o,{C9:function(){return s},Kq:function(){return d},Y0:function(){return t},uR:function(){return n}});var a=l(1189);const r="http://147.182.161.84:9000/api/v1";function t(e){return a.A.get(`${r}/customers/all`,{headers:{Authorization:`Bearer ${e}`}})}function n(e,o){return a.A.post(`${r}/customers/add`,o,{headers:{Authorization:`Bearer ${e}`}})}function d(e,o,l){return a.A.put(`${r}/customers/update/${l}`,o,{headers:{Authorization:`Bearer ${e}`}})}function s(e,o){return a.A.delete(`${r}/customers/delete/${o}`,{headers:{Authorization:`Bearer ${e}`}})}},3321:function(e,o,l){l.r(o),l.d(o,{default:function(){return N}});var a=l(6768);const r=e=>((0,a.Qi)("data-v-30dbe768"),e=e(),(0,a.jt)(),e),t={class:"pt-0 mt-0 pb-10 ml-0 mr-0 min-w-max[100%]"},n={class:"flex justify-between items-center mb-2 bg-gray-50 p-6 rounded-lg shadow-lg"},d=r((()=>(0,a.Lk)("h1",{class:"font-bold lg:text-2xl text-xl text-indigo-900"},[(0,a.Lk)("span",{class:"mdi mdi-account-group"}),(0,a.eW)(" Mantenimiento de Clientes")],-1)));function s(e,o,l,r,s,i){const u=(0,a.g2)("DataTable"),m=(0,a.g2)("CreateCustomersForm");return(0,a.uX)(),(0,a.CE)("div",t,[(0,a.Lk)("div",null,[(0,a.Lk)("div",n,[d,(0,a.Lk)("button",{class:"flex items-center justify-center bg-[#ff8c54] text-white font-semibold px-5 py-2 rounded-lg hover:bg-orange-500 shadow-md",onClick:o[0]||(o[0]=(...e)=>r.openCreateForm&&r.openCreateForm(...e))}," Crear + ")]),(0,a.bF)(u),r.isCreateFormVisible?((0,a.uX)(),(0,a.Wv)(m,{key:0,onClose:r.closeCreateForm},null,8,["onClose"])):(0,a.Q3)("",!0)])])}var i=l(144),u=l(2729),m=l(6329),c=l(9669),p=l(5728);function b(e,o,l,r,t,n){const d=(0,a.g2)("EditCustomersForm"),s=(0,a.g2)("SuccessAlert"),i=(0,a.g2)("ErrorAlert"),b=(0,a.g2)("WarningAlert");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(u.J,{flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(p.W,{modelValue:r.search,"onUpdate:modelValue":o[0]||(o[0]=e=>r.search=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",density:"compact"},null,8,["modelValue"]),(0,a.bF)(m.Py,{headers:r.headers,items:r.filteredItems,search:r.search},{["item.actions"]:(0,a.k6)((({item:e})=>[(0,a.bF)(c.w,{small:"",class:"mr-2",onClick:o=>r.openEditForm(e)},{default:(0,a.k6)((()=>[(0,a.eW)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,a.bF)(c.w,{small:"",color:"red",onClick:o=>r.deleteItem(e)},{default:(0,a.k6)((()=>[(0,a.eW)(" mdi-delete ")])),_:2},1032,["onClick"])])),_:2},1032,["headers","items","search"]),r.isEditFormVisible?((0,a.uX)(),(0,a.Wv)(d,{key:0,cisterns:r.selectCisterns,onClose:r.closeEditForm},null,8,["cisterns","onClose"])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(s),(0,a.bF)(i),(0,a.bF)(b)],64)}var f=l(5679),V=l(5129),F=l(6859),k=l(5130),v=l(2807),g=l(1606),h=l(697),C=l(3745),A=l(1772),y=l(1560);const W=e=>((0,a.Qi)("data-v-7888ddfe"),e=e(),(0,a.jt)(),e),_=W((()=>(0,a.Lk)("span",{class:"text-h5"},"Editar cliente",-1)));function x(e,o,l,r,t,n){return(0,a.uX)(),(0,a.Wv)(A.p,{modelValue:r.dialog,"onUpdate:modelValue":o[8]||(o[8]=e=>r.dialog=e),"max-width":"600px",persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(u.J,null,{default:(0,a.k6)((()=>[(0,a.bF)(g.r,{class:"text-center"},{default:(0,a.k6)((()=>[_])),_:1}),(0,a.bF)(h.O,null,{default:(0,a.k6)((()=>[(0,a.bF)(y.n,{onSubmit:(0,k.D$)(r.submitForm,["prevent"])},{default:(0,a.k6)((()=>[(0,a.bF)(p.W,{modelValue:r.form.code,"onUpdate:modelValue":o[0]||(o[0]=e=>r.form.code=e),label:"Código de cliente","prepend-icon":"mdi mdi-shield-check",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.name,"onUpdate:modelValue":o[1]||(o[1]=e=>r.form.name=e),label:"Nombre de cliente","prepend-icon":"mdi mdi-clipboard-account-outline",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.document,"onUpdate:modelValue":o[2]||(o[2]=e=>r.form.document=e),label:"Documento","prepend-icon":"mdi mdi-card-account-details",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.business,"onUpdate:modelValue":o[3]||(o[3]=e=>r.form.business=e),label:"Razón social","prepend-icon":"mdi mdi-card-account-details-star",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.ubigeo,"onUpdate:modelValue":o[4]||(o[4]=e=>r.form.ubigeo=e),label:"Ubigeo","prepend-icon":"mdi-map-marker",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.address,"onUpdate:modelValue":o[5]||(o[5]=e=>r.form.address=e),label:"Dirección","prepend-icon":"mdi-map",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.email,"onUpdate:modelValue":o[6]||(o[6]=e=>r.form.email=e),label:"Correo electrónico","prepend-icon":"mdi-email",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.phone,"onUpdate:modelValue":o[7]||(o[7]=e=>r.form.phone=e),label:"Teléfono","prepend-icon":"mdi-phone",required:""},null,8,["modelValue"]),(0,a.bF)(C.S,{class:"justify-end"},{default:(0,a.k6)((()=>[(0,a.bF)(v.D,{text:"",onClick:r.closeDialog,color:"#180c24"},{default:(0,a.k6)((()=>[(0,a.eW)("Cancelar")])),_:1},8,["onClick"]),(0,a.bF)(v.D,{type:"submit",color:"#ff8c54"},{default:(0,a.k6)((()=>[(0,a.eW)("Guardar")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var U={props:{cisterns:{type:Object,required:!0}},emits:["close"],setup(e,{emit:o}){const l=(0,i.KR)(!0),r=(0,i.KR)({code:"",capacity:"",plate:"",documentSeries:""});(0,a.wB)((()=>e.cisterns),(e=>{e&&(r.value={...e})}),{immediate:!0});const t=()=>{o("close")},n=async()=>{try{const e={name:r.value.name,code:r.value.code,document:r.value.document,business:r.value.business,ubigeo:r.value.business,address:r.value.address,email:r.value.email,phone:r.value.phone},o=V.A.state.token,l=r.value.customerId;await(0,f.Kq)(o,e,l),F.A.emit("success","¡Operación completada con éxito!"),F.A.emit("masterCreated"),t()}catch(e){F.A.emit("error",`Ups... hubo un error al editar el usuario:  ${e.message}`),console.error("Error al actualizar el cisterns:",e.message)}};return{dialog:l,form:r,closeDialog:t,submitForm:n}}},q=l(1241);const w=(0,q.A)(U,[["render",x],["__scopeId","data-v-7888ddfe"]]);var E=w,D=l(8372),R=l(7572),$=l(3194),K={name:"DataTable",components:{EditCustomersForm:E,SuccessAlert:D.A,ErrorAlert:R.A,WarningAlert:$.A},setup(){const e=(0,i.KR)(""),o=(0,i.KR)([]),l=V.A.state.token,r=(0,i.KR)(!1),t=(0,i.KR)(null),n=(0,i.KR)([{key:"code",title:"Código"},{align:"start",key:"name",sortable:!1,title:"Nombre"},{key:"document",title:"RUC"},{key:"business",title:"Razón Social",sortable:!1},{key:"address",title:"Dirección",sortable:!1},{key:"email",title:"Correo",sortable:!1},{key:"phone",title:"Télefono",sortable:!1},{key:"actions",title:"Acciones",sortable:!1}]),d=async()=>{try{const e=await(0,f.Y0)(l);o.value=e.data.data}catch(e){console.error("Error al obtener los cisterns:",e)}},s=e=>{t.value=e,r.value=!0},u=()=>{r.value=!1};(0,a.sV)((()=>{d(),F.A.on("masterCreated",d)})),(0,a.xo)((()=>{F.A.off("masterCreated",d)}));const m=(0,a.EW)((()=>{if(!e.value)return o.value;const l=e.value.toLowerCase();return o.value.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(l)))))})),c=e=>{console.log(e);const o=e.customerId,l=e.username;F.A.emit("warning",{msg:`¿Estás seguro de que deseas eliminar al usuario ${l}?`,action:async()=>{try{const e=V.A.state.token;await(0,f.C9)(e,o),F.A.emit("success","¡Operación completada con éxito!"),d()}catch(e){const o=e.response?.data?.message||e.response?.data||"Error al eliminar.";F.A.emit("error",o),console.error("Error al eliminar el cisterns:",e)}}})};return{search:e,headers:n,filteredItems:m,openEditForm:s,closeEditForm:u,isEditFormVisible:r,selectCisterns:t,deleteItem:c}}};const S=(0,q.A)(K,[["render",b],["__scopeId","data-v-66cfd33b"]]);var I=S;const L=(0,a.Lk)("span",{class:"text-h5 mp-2 mb-4 text-center"},"Crear Nuevo Cliente",-1);function j(e,o,l,r,t,n){return(0,a.uX)(),(0,a.Wv)(A.p,{modelValue:r.dialog,"onUpdate:modelValue":o[8]||(o[8]=e=>r.dialog=e),"max-width":"600px",persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(u.J,null,{default:(0,a.k6)((()=>[L,(0,a.bF)(h.O,null,{default:(0,a.k6)((()=>[(0,a.bF)(y.n,{onSubmit:(0,k.D$)(r.submitForm,["prevent"])},{default:(0,a.k6)((()=>[(0,a.bF)(p.W,{modelValue:r.form.code,"onUpdate:modelValue":o[0]||(o[0]=e=>r.form.code=e),label:"Código de cliente","prepend-icon":"mdi mdi-shield-check",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.name,"onUpdate:modelValue":o[1]||(o[1]=e=>r.form.name=e),label:"Nombre de cliente","prepend-icon":"mdi mdi-clipboard-account-outline",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.document,"onUpdate:modelValue":o[2]||(o[2]=e=>r.form.document=e),label:"Documento","prepend-icon":"mdi mdi-card-account-details",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.business,"onUpdate:modelValue":o[3]||(o[3]=e=>r.form.business=e),label:"Razón social","prepend-icon":"mdi mdi-card-account-details-star",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.ubigeo,"onUpdate:modelValue":o[4]||(o[4]=e=>r.form.ubigeo=e),label:"Ubigeo","prepend-icon":"mdi-map-marker",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.address,"onUpdate:modelValue":o[5]||(o[5]=e=>r.form.address=e),label:"Dirección","prepend-icon":"mdi-map",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.email,"onUpdate:modelValue":o[6]||(o[6]=e=>r.form.email=e),label:"Correo electrónico","prepend-icon":"mdi-email",required:""},null,8,["modelValue"]),(0,a.bF)(p.W,{modelValue:r.form.phone,"onUpdate:modelValue":o[7]||(o[7]=e=>r.form.phone=e),label:"Teléfono","prepend-icon":"mdi-phone",required:""},null,8,["modelValue"]),(0,a.bF)(C.S,{class:"justify-end"},{default:(0,a.k6)((()=>[(0,a.bF)(v.D,{text:"",onClick:r.closeDialog,color:"#180c24"},{default:(0,a.k6)((()=>[(0,a.eW)("Cancelar")])),_:1},8,["onClick"]),(0,a.bF)(v.D,{type:"submit",color:"#ff8c54"},{default:(0,a.k6)((()=>[(0,a.eW)("Guardar")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var z={emits:["close"],setup(e,{emit:o}){const l=(0,i.KR)(!0),a=(0,i.KR)({name:"",code:"",document:"",business:"",ubigeo:"",address:"",email:"",phone:""}),r=()=>{o("close")},t=async()=>{const e=V.A.state.token,o={name:a.value.name,code:a.value.code,document:a.value.document,business:a.value.business,ubigeo:a.value.business,address:a.value.address,email:a.value.email,phone:a.value.phone};try{await(0,f.uR)(e,o),F.A.emit("success","¡Operación completada con éxito!"),F.A.emit("masterCreated"),r()}catch(l){F.A.emit("error",`Ups... hubo un error al crear el usuario:  ${l.message}`)}};return{dialog:l,form:a,closeDialog:r,submitForm:t}}};const O=(0,q.A)(z,[["render",j]]);var B=O,T={components:{DataTable:I,CreateCustomersForm:B},setup(){const e=(0,i.KR)(!1),o=()=>{e.value=!0},l=()=>{e.value=!1};return{isCreateFormVisible:e,openCreateForm:o,closeCreateForm:l}}};const X=(0,q.A)(T,[["render",s],["__scopeId","data-v-30dbe768"]]);var N=X}}]);
//# sourceMappingURL=321.7ace0199.js.map