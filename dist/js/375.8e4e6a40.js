"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[375],{6260:function(e,t,r){r.d(t,{AN:function(){return n},kr:function(){return o},lg:function(){return i},lx:function(){return s}});var a=r(1189);const l="http://147.182.161.84:9000/api/v1";function o(e){return a.A.get(`${l}/billings/all`,{headers:{Authorization:`Bearer ${e}`}})}function n(e,t){return a.A.post(`${l}/billings/add`,t,{headers:{Authorization:`Bearer ${e}`}})}function i(e,t,r){return console.log(r),a.A.put(`${l}/billings/update/${r}`,t,{headers:{Authorization:`Bearer ${e}`}})}function s(e,t){return a.A.delete(`${l}/billings/delete/${t}`,{headers:{Authorization:`Bearer ${e}`}})}},1375:function(e,t,r){r.r(t),r.d(t,{default:function(){return Q}});var a=r(6768);const l=e=>((0,a.Qi)("data-v-aed7e274"),e=e(),(0,a.jt)(),e),o={class:"pt-0 mt-0 pb-10 ml-0 mr-0 min-w-max[100%]"},n={class:"flex justify-between items-center mb-2 bg-gray-50 p-6 rounded-lg shadow-lg"},i=l((()=>(0,a.Lk)("h1",{class:"font-bold lg:text-2xl text-xl text-indigo-900"},[(0,a.Lk)("span",{class:"mdi mdi-card-bulleted-settings"}),(0,a.eW)(" Mantenimiento de Facturación")],-1)));function s(e,t,r,l,s,c){const d=(0,a.g2)("DataTable"),u=(0,a.g2)("CreateBillingForm");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",null,[(0,a.Lk)("div",n,[i,(0,a.Lk)("button",{class:"flex items-center justify-center bg-[#ff8c54] text-white font-semibold px-5 py-2 rounded-lg hover:bg-orange-500 shadow-md",onClick:t[0]||(t[0]=(...e)=>l.openCreateForm&&l.openCreateForm(...e))}," Crear + ")]),(0,a.bF)(d),l.isCreateFormVisible?((0,a.uX)(),(0,a.Wv)(u,{key:0,onClose:l.closeCreateForm},null,8,["onClose"])):(0,a.Q3)("",!0)])])}var c=r(144),d=r(2729),u=r(6329),m=r(9669),p=r(5728);function b(e,t,r,l,o,n){const i=(0,a.g2)("EditBillingForm"),s=(0,a.g2)("SuccessAlert"),c=(0,a.g2)("ErrorAlert"),b=(0,a.g2)("WarningAlert");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(d.J,{flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(p.W,{modelValue:l.search,"onUpdate:modelValue":t[0]||(t[0]=e=>l.search=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",density:"compact"},null,8,["modelValue"]),(0,a.bF)(u.Py,{headers:l.headers,items:l.filteredItems,search:l.search},{["item.actions"]:(0,a.k6)((({item:e})=>[(0,a.bF)(m.w,{small:"",class:"mr-2",onClick:t=>l.openEditForm(e)},{default:(0,a.k6)((()=>[(0,a.eW)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,a.bF)(m.w,{small:"",color:"red",onClick:t=>l.deleteItem(e)},{default:(0,a.k6)((()=>[(0,a.eW)(" mdi-delete ")])),_:2},1032,["onClick"])])),_:2},1032,["headers","items","search"]),l.isEditFormVisible?((0,a.uX)(),(0,a.Wv)(i,{key:0,cisterns:l.selectCisterns,onClose:l.closeEditForm},null,8,["cisterns","onClose"])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(s),(0,a.bF)(c),(0,a.bF)(b)],64)}var f=r(6260),g=r(5129),k=r(6859),F=r(5130),v=r(2807),h=r(1606),C=r(697),A=r(3745),_=r(1772),x=r(1560);const y=e=>((0,a.Qi)("data-v-cc1b6392"),e=e(),(0,a.jt)(),e),V=y((()=>(0,a.Lk)("span",{class:"text-h5"},"Editar Cisterna",-1)));function w(e,t,r,l,o,n){return(0,a.uX)(),(0,a.Wv)(_.p,{modelValue:l.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>l.dialog=e),"max-width":"600px",persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(d.J,null,{default:(0,a.k6)((()=>[(0,a.bF)(h.r,{class:"text-center"},{default:(0,a.k6)((()=>[V])),_:1}),(0,a.bF)(C.O,null,{default:(0,a.k6)((()=>[(0,a.bF)(x.n,{onSubmit:(0,F.D$)(l.submitForm,["prevent"])},{default:(0,a.k6)((()=>[(0,a.bF)(p.W,{modelValue:l.form.description,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.description=e),label:"Código de cisterna","prepend-icon":"mdi mdi-shield-check",required:""},null,8,["modelValue"]),(0,a.bF)(A.S,{class:"justify-end"},{default:(0,a.k6)((()=>[(0,a.bF)(v.D,{text:"",onClick:l.closeDialog,color:"#180c24"},{default:(0,a.k6)((()=>[(0,a.eW)("Cancelar")])),_:1},8,["onClick"]),(0,a.bF)(v.D,{type:"submit",color:"#ff8c54"},{default:(0,a.k6)((()=>[(0,a.eW)("Guardar")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var E={props:{cisterns:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const r=(0,c.KR)(!0),l=(0,c.KR)({description:""});(0,a.wB)((()=>e.cisterns),(e=>{e&&(l.value={...e})}),{immediate:!0});const o=()=>{t("close")},n=async()=>{try{const e={description:l.value.description},t=g.A.state.token,r=l.value.billingId;await(0,f.lg)(t,e,r),k.A.emit("success","¡Operación completada con éxito!"),k.A.emit("masterCreated"),o()}catch(e){k.A.emit("error",`Ups... hubo un error al editar el usuario:  ${e.message}`),console.error("Error al actualizar el cisterns:",e.message)}};return{dialog:r,form:l,closeDialog:o,submitForm:n}}},W=r(1241);const $=(0,W.A)(E,[["render",w],["__scopeId","data-v-cc1b6392"]]);var D=$,K=r(8372),B=r(7572),R=r(3194),I={name:"DataTable",components:{EditBillingForm:D,SuccessAlert:K.A,ErrorAlert:B.A,WarningAlert:R.A},setup(){const e=(0,c.KR)(""),t=(0,c.KR)([]),r=g.A.state.token,l=(0,c.KR)(!1),o=(0,c.KR)(null),n=(0,c.KR)([{key:"description",title:"Nombre de la Factura",align:"center"},{key:"actions",title:"Acciones",sortable:!1}]),i=async()=>{try{const e=await(0,f.kr)(r);t.value=e.data.data}catch(e){console.error("Error al obtener los cisterns:",e)}},s=e=>{o.value=e,l.value=!0},d=()=>{l.value=!1};(0,a.sV)((()=>{i(),k.A.on("masterCreated",i)})),(0,a.xo)((()=>{k.A.off("masterCreated",i)}));const u=(0,a.EW)((()=>{if(!e.value)return t.value;const r=e.value.toLowerCase();return t.value.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(r)))))})),m=e=>{const t=e.billingId,r=e.username;k.A.emit("warning",{msg:`¿Estás seguro de que deseas eliminar al usuario ${r}?`,action:async()=>{try{const e=g.A.state.token;await(0,f.lx)(e,t),k.A.emit("success","¡Operación completada con éxito!"),i()}catch(e){console.error("Error al eliminar el cisterns:",e)}}})};return{search:e,headers:n,filteredItems:u,openEditForm:s,closeEditForm:d,isEditFormVisible:l,selectCisterns:o,deleteItem:m}}};const L=(0,W.A)(I,[["render",b],["__scopeId","data-v-2c44b968"]]);var S=L;const j=(0,a.Lk)("span",{class:"text-h5 mp-2 mb-4 text-center"},"Crear Nueva Factura",-1);function O(e,t,r,l,o,n){return(0,a.uX)(),(0,a.Wv)(_.p,{modelValue:l.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>l.dialog=e),"max-width":"600px",persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(d.J,null,{default:(0,a.k6)((()=>[j,(0,a.bF)(C.O,null,{default:(0,a.k6)((()=>[(0,a.bF)(x.n,{onSubmit:(0,F.D$)(l.submitForm,["prevent"])},{default:(0,a.k6)((()=>[(0,a.bF)(p.W,{modelValue:l.form.description,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.description=e),label:"Nombre de factura","prepend-icon":"mdi mdi-card",required:""},null,8,["modelValue"]),(0,a.bF)(A.S,{class:"justify-end"},{default:(0,a.k6)((()=>[(0,a.bF)(v.D,{text:"",onClick:l.closeDialog,color:"#180c24"},{default:(0,a.k6)((()=>[(0,a.eW)("Cancelar")])),_:1},8,["onClick"]),(0,a.bF)(v.D,{type:"submit",color:"#ff8c54"},{default:(0,a.k6)((()=>[(0,a.eW)("Guardar")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var U={emits:["close"],setup(e,{emit:t}){const r=(0,c.KR)(!0),a=(0,c.KR)({description:""}),l=()=>{t("close")},o=async()=>{const e=g.A.state.token,t={description:a.value.description};try{await(0,f.AN)(e,t),k.A.emit("success","¡Operación completada con éxito!"),k.A.emit("masterCreated"),l()}catch(r){k.A.emit("error",`Ups... hubo un error al crear el usuario:  ${r.message}`)}};return{dialog:r,form:a,closeDialog:l,submitForm:o}}};const X=(0,W.A)(U,[["render",O]]);var z=X,N={components:{DataTable:S,CreateBillingForm:z},setup(){const e=(0,c.KR)(!1),t=()=>{e.value=!0},r=()=>{e.value=!1};return{isCreateFormVisible:e,openCreateForm:t,closeCreateForm:r}}};const q=(0,W.A)(N,[["render",s],["__scopeId","data-v-aed7e274"]]);var Q=q}}]);
//# sourceMappingURL=375.8e4e6a40.js.map