"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[207],{1207:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var r=a(6768);const l=e=>((0,r.Qi)("data-v-4e9e6ff2"),e=e(),(0,r.jt)(),e),o={class:"pt-0 mt-0 pb-10 ml-0 mr-0 min-w-max[100%]"},s={class:"flex justify-between items-center mb-2 bg-gray-50 p-6 rounded-lg shadow-lg"},n=l((()=>(0,r.Lk)("h1",{class:"font-bold lg:text-2xl text-xl text-indigo-900"},[(0,r.Lk)("span",{class:"mdi mdi-dolly"}),(0,r.eW)(" Mantenimiento de Proveedores")],-1)));function i(e,t,a,l,i,u){const c=(0,r.g2)("DataTable"),d=(0,r.g2)("CreateSuppliersForm");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("div",null,[(0,r.Lk)("div",s,[n,(0,r.Lk)("button",{class:"flex items-center justify-center bg-[#ff8c54] text-white font-semibold px-5 py-2 rounded-lg hover:bg-orange-500 shadow-md",onClick:t[0]||(t[0]=(...e)=>l.openCreateForm&&l.openCreateForm(...e))}," Crear + ")]),(0,r.bF)(c),l.isCreateFormVisible?((0,r.uX)(),(0,r.Wv)(d,{key:0,onClose:l.closeCreateForm},null,8,["onClose"])):(0,r.Q3)("",!0)])])}var u=a(144),c=a(2729),d=a(6329),m=a(9669),p=a(5728);function b(e,t,a,l,o,s){const n=(0,r.g2)("EditSuppliersForm"),i=(0,r.g2)("SuccessAlert"),u=(0,r.g2)("ErrorAlert"),b=(0,r.g2)("WarningAlert");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(c.J,{flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(p.W,{modelValue:l.search,"onUpdate:modelValue":t[0]||(t[0]=e=>l.search=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"]),(0,r.bF)(d.Py,{headers:l.headers,items:l.filteredItems,search:l.search},{["item.actions"]:(0,r.k6)((({item:e})=>[(0,r.bF)(m.w,{small:"",class:"mr-2",onClick:t=>l.openEditForm(e)},{default:(0,r.k6)((()=>[(0,r.eW)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,r.bF)(m.w,{small:"",color:"red",onClick:t=>l.deleteItem(e)},{default:(0,r.k6)((()=>[(0,r.eW)(" mdi-delete ")])),_:2},1032,["onClick"])])),_:2},1032,["headers","items","search"]),l.isEditFormVisible?((0,r.uX)(),(0,r.Wv)(n,{key:0,cisterns:l.selectCisterns,onClose:l.closeEditForm},null,8,["cisterns","onClose"])):(0,r.Q3)("",!0)])),_:1}),(0,r.bF)(i),(0,r.bF)(u),(0,r.bF)(b)],64)}var f=a(1189);const F="http://147.182.161.84:9000/api/v1";function k(e){return f.A.get(`${F}/suppliers/all`,{headers:{Authorization:`Bearer ${e}`}})}function v(e,t){return f.A.post(`${F}/suppliers/add`,t,{headers:{Authorization:`Bearer ${e}`}})}function g(e,t,a){return console.log(a),f.A.put(`${F}/suppliers/update/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}function C(e,t){return f.A.delete(`${F}/suppliers/delete/${t}`,{headers:{Authorization:`Bearer ${e}`}})}var h=a(5129),A=a(6859),x=a(5130),_=a(2807),V=a(1606),y=a(697),w=a(3745),E=a(1772),W=a(1560);const $=e=>((0,r.Qi)("data-v-335d1990"),e=e(),(0,r.jt)(),e),R=$((()=>(0,r.Lk)("span",{class:"text-h5"},"Editar Proveedor",-1)));function S(e,t,a,l,o,s){return(0,r.uX)(),(0,r.Wv)(E.p,{modelValue:l.dialog,"onUpdate:modelValue":t[2]||(t[2]=e=>l.dialog=e),"max-width":"600px",persistent:""},{default:(0,r.k6)((()=>[(0,r.bF)(c.J,null,{default:(0,r.k6)((()=>[(0,r.bF)(V.r,{class:"text-center"},{default:(0,r.k6)((()=>[R])),_:1}),(0,r.bF)(y.O,null,{default:(0,r.k6)((()=>[(0,r.bF)(W.n,{onSubmit:(0,x.D$)(l.submitForm,["prevent"])},{default:(0,r.k6)((()=>[(0,r.bF)(p.W,{modelValue:l.form.business,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.business=e),label:"Razón social","prepend-icon":"mdi mdi-account-box",required:""},null,8,["modelValue"]),(0,r.bF)(p.W,{modelValue:l.form.name,"onUpdate:modelValue":t[1]||(t[1]=e=>l.form.name=e),label:"Nombre","prepend-icon":"mdi mdi-account-edit-outline",required:""},null,8,["modelValue"]),(0,r.bF)(w.S,{class:"justify-end"},{default:(0,r.k6)((()=>[(0,r.bF)(_.D,{text:"",onClick:l.closeDialog,color:"#180c24"},{default:(0,r.k6)((()=>[(0,r.eW)("Cancelar")])),_:1},8,["onClick"]),(0,r.bF)(_.D,{type:"submit",color:"#ff8c54"},{default:(0,r.k6)((()=>[(0,r.eW)("Guardar")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var D={props:{cisterns:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const a=(0,u.KR)(!0),l=(0,u.KR)({business:"",name:""});(0,r.wB)((()=>e.cisterns),(e=>{e&&(l.value={...e})}),{immediate:!0});const o=()=>{t("close")},s=async()=>{try{const e={business:l.value.business,name:l.value.name},t=h.A.state.token,a=l.value.supplierId;await g(t,e,a),A.A.emit("success","¡Operación completada con éxito!"),A.A.emit("masterCreated"),o()}catch(e){A.A.emit("error",`Ups... hubo un error al editar el usuario:  ${e.message}`),console.error("Error al actualizar el cisterns:",e.message)}};return{dialog:a,form:l,closeDialog:o,submitForm:s}}},K=a(1241);const L=(0,K.A)(D,[["render",S],["__scopeId","data-v-335d1990"]]);var I=L,O=a(8372),U=a(7572),j=a(3194),z={name:"DataTable",components:{EditSuppliersForm:I,SuccessAlert:O.A,ErrorAlert:U.A,WarningAlert:j.A},setup(){const e=(0,u.KR)(""),t=(0,u.KR)([]),a=h.A.state.token,l=(0,u.KR)(!1),o=(0,u.KR)(null),s=(0,u.KR)([{key:"business",title:"RAZÓN SOCIAL",align:"center"},{key:"name",title:"NOMBRE",align:"center"},{key:"actions",title:"Acciones",sortable:!1}]),n=async()=>{try{const e=await k(a);t.value=e.data.data}catch(e){console.error("Error al obtener los cisterns:",e)}},i=e=>{o.value=e,l.value=!0},c=()=>{l.value=!1};(0,r.sV)((()=>{n(),A.A.on("masterCreated",n)})),(0,r.xo)((()=>{A.A.off("masterCreated",n)}));const d=(0,r.EW)((()=>{if(!e.value)return t.value;const a=e.value.toLowerCase();return t.value.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(a)))))})),m=e=>{const t=e.supplierId,a=e.username;A.A.emit("warning",{msg:`¿Estás seguro de que deseas eliminar al usuario ${a}?`,action:async()=>{try{const e=h.A.state.token;await C(e,t),A.A.emit("success","¡Operación completada con éxito!"),n()}catch(e){console.error("Error al eliminar el cisterns:",e)}}})};return{search:e,headers:s,filteredItems:d,openEditForm:i,closeEditForm:c,isEditFormVisible:l,selectCisterns:o,deleteItem:m}}};const B=(0,K.A)(z,[["render",b]]);var q=B;const X=(0,r.Lk)("span",{class:"text-h5 mp-2 mb-4 text-center"},"Crear Nueva Factura",-1);function N(e,t,a,l,o,s){return(0,r.uX)(),(0,r.Wv)(E.p,{modelValue:l.dialog,"onUpdate:modelValue":t[2]||(t[2]=e=>l.dialog=e),"max-width":"600px",persistent:""},{default:(0,r.k6)((()=>[(0,r.bF)(c.J,null,{default:(0,r.k6)((()=>[X,(0,r.bF)(y.O,null,{default:(0,r.k6)((()=>[(0,r.bF)(W.n,{onSubmit:(0,x.D$)(l.submitForm,["prevent"])},{default:(0,r.k6)((()=>[(0,r.bF)(p.W,{modelValue:l.form.business,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.business=e),label:"Razón social","prepend-icon":"mdi mdi-account-box",required:""},null,8,["modelValue"]),(0,r.bF)(p.W,{modelValue:l.form.name,"onUpdate:modelValue":t[1]||(t[1]=e=>l.form.name=e),label:"Nombre","prepend-icon":"mdi mdi-account-edit-outline",required:""},null,8,["modelValue"]),(0,r.bF)(w.S,{class:"justify-end"},{default:(0,r.k6)((()=>[(0,r.bF)(_.D,{text:"",onClick:l.closeDialog,color:"#180c24"},{default:(0,r.k6)((()=>[(0,r.eW)("Cancelar")])),_:1},8,["onClick"]),(0,r.bF)(_.D,{type:"submit",color:"#ff8c54"},{default:(0,r.k6)((()=>[(0,r.eW)("Guardar")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var Q={emits:["close"],setup(e,{emit:t}){const a=(0,u.KR)(!0),r=(0,u.KR)({business:"",name:""}),l=()=>{t("close")},o=async()=>{const e=h.A.state.token,t={business:r.value.business,name:r.value.name};try{await v(e,t),A.A.emit("success","¡Operación completada con éxito!"),A.A.emit("masterCreated"),l()}catch(a){A.A.emit("error",`Ups... hubo un error al crear el usuario:  ${a.message}`)}};return{dialog:a,form:r,closeDialog:l,submitForm:o}}};const J=(0,K.A)(Q,[["render",N]]);var P=J,T={components:{DataTable:q,CreateSuppliersForm:P},setup(){const e=(0,u.KR)(!1),t=()=>{e.value=!0},a=()=>{e.value=!1};return{isCreateFormVisible:e,openCreateForm:t,closeCreateForm:a}}};const G=(0,K.A)(T,[["render",i],["__scopeId","data-v-4e9e6ff2"]]);var M=G}}]);
//# sourceMappingURL=207.b6d4c613.js.map